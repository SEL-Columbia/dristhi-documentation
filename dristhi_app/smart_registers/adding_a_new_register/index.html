
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>Adding a new register to the app  | Project Dristhi</title>

	<meta name="author" content="Project Dristhi">

<meta name="description" content="How to add a new register to the app The following steps are involved in adding a new register to the app (Please note: This documentation is written &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="" rel="alternate" title="Project Dristhi" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/dristhi-documentation/favicon.png" rel="shortcut icon">
	<link href="/dristhi-documentation/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/dristhi-documentation/">Project Dristhi</a></h1>
<span class="tagline">Documentation for Project Dristhi</span>
<nav id="main-nav"><ul>

</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>

</ul>
</div>
	</div>
</nav>


</header>

	<div id="content" class="inner"><article class="page">
    <div class="entry-content"><h1>How to add a new register to the app</h1>

<p>The following steps are involved in adding a new register to the app</p>

<p>(Please note: This documentation is written for the Android Native Home screen and adding a new native register)</p>

<ul>
<li>The new native has to implemented as per the architecture defined in the <a href="/dristhi-documentation/dristhi_app/smart_registers/architecture_native_registers">Native Register Architecture</a></li>
<li>The UI for the new register shall be defined in the corresponding layout xml file(s)</li>
<li>The Register Activity shall instantiate the necessary controllers and the ClientProviders as required</li>
<li>Once the register has been defined, it needs to be added to the home register for it to be launched</li>
<li>To add a new button to the Home Screen, the description of then new button needs to be added to the layout file for the home screen</li>
<li>For example, the EC Register button is defined in the <a href="https://github.com/SEL-Columbia/dristhi-app/blob/master/dristhi-app/res/layout/smart_registers_home.xml#L26-56">smart_registers_home.xml</a> as below:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;FrameLayout</span>
</span><span class='line'>        <span class="na">android:layout_width=</span><span class="s">&quot;0dp&quot;</span>
</span><span class='line'>        <span class="na">android:layout_height=</span><span class="s">&quot;fill_parent&quot;</span>
</span><span class='line'>        <span class="na">android:layout_weight=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;ImageButton</span>
</span><span class='line'>            <span class="na">android:id=</span><span class="s">&quot;@+id/btn_ec_register&quot;</span>
</span><span class='line'>            <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>            <span class="na">android:layout_height=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>            <span class="na">android:src=</span><span class="s">&quot;@drawable/register_ec&quot;</span>
</span><span class='line'>            <span class="na">style=</span><span class="s">&quot;@style/ImageButton.Home.Register&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;org.ei.drishti.view.customControls.CustomFontTextView</span>
</span><span class='line'>            <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>            <span class="na">android:text=</span><span class="s">&quot;EC&quot;</span>
</span><span class='line'>            <span class="na">android:textStyle=</span><span class="s">&quot;bold&quot;</span>
</span><span class='line'>            <span class="na">style=</span><span class="s">&quot;@style/CustomFontTextViewStyle.Home.RegisterName&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;org.ei.drishti.view.customControls.CustomFontTextView</span>
</span><span class='line'>            <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>            <span class="na">android:text=</span><span class="s">&quot;REGISTER&quot;</span>
</span><span class='line'>            <span class="na">style=</span><span class="s">&quot;@style/CustomFontTextViewStyle.Home.RegisterLabel&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;org.ei.drishti.view.customControls.CustomFontTextView</span>
</span><span class='line'>            <span class="na">android:id=</span><span class="s">&quot;@+id/txt_ec_register_client_count&quot;</span>
</span><span class='line'>            <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>            <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>            <span class="na">style=</span><span class="s">&quot;@style/CustomFontTextViewStyle.Badge&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/FrameLayout&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Once the new button has been added to the home register, then the corresponding register activity has to be opened when the button is tapped</li>
<li>This can be achived by creating a method in navigation controller which launches the new register activity</li>
<li>Then in the <a href="https://github.com/SEL-Columbia/dristhi-app/blob/master/dristhi-app/src/main/java/org/ei/drishti/view/activity/NativeHomeActivity.java#L185-211">NativeHomeActivity</a> the corresponding method is called based on the id of which button is tapped</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span> <span class="n">onRegisterStartListener</span> <span class="o">=</span> <span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">switch</span> <span class="o">(</span><span class="n">view</span><span class="o">.</span><span class="na">getId</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btn_ec_register</span><span class="o">:</span>
</span><span class='line'>                <span class="n">navigationController</span><span class="o">.</span><span class="na">startECSmartRegistry</span><span class="o">();</span>
</span><span class='line'>                <span class="k">break</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btn_anc_register</span><span class="o">:</span>
</span><span class='line'>                <span class="n">navigationController</span><span class="o">.</span><span class="na">startANCSmartRegistry</span><span class="o">();</span>
</span><span class='line'>                <span class="k">break</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btn_pnc_register</span><span class="o">:</span>
</span><span class='line'>                <span class="n">navigationController</span><span class="o">.</span><span class="na">startPNCSmartRegistry</span><span class="o">();</span>
</span><span class='line'>                <span class="k">break</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btn_child_register</span><span class="o">:</span>
</span><span class='line'>                <span class="n">navigationController</span><span class="o">.</span><span class="na">startChildSmartRegistry</span><span class="o">();</span>
</span><span class='line'>                <span class="k">break</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">case</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">btn_fp_register</span><span class="o">:</span>
</span><span class='line'>                <span class="n">navigationController</span><span class="o">.</span><span class="na">startFPSmartRegistry</span><span class="o">();</span>
</span><span class='line'>                <span class="k">break</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>This would launch the new register</li>
</ul>

</div>
</article>


</div>
	<footer id="footer" class="inner">&copy; 2015

   <a href='#'>Project Dristhi</a>

</footer>
	<script src="/dristhi-documentation/javascripts/slash.js"></script>
<script src="/dristhi-documentation/javascripts/hyphenator.js"></script>







</body>
</html>
